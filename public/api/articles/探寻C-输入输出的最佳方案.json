{"title":"探寻C++输入输出的最佳方案","uid":"06a43fe365ef05a958ca95b02c98495b","slug":"探寻C-输入输出的最佳方案","date":"2025-11-08T05:32:37.000Z","updated":"2025-11-08T08:35:14.076Z","comments":true,"path":"api/articles/探寻C-输入输出的最佳方案.json","keywords":"Catice, 猫冰","cover":null,"content":"<h2 id=\"0-前言\"><a href=\"#0-前言\" class=\"headerlink\" title=\"0.前言\"></a>0.前言</h2><p>看大佬题解时总是会提到关于输入输出的问题，那就是：<br>cstdio的输入输出函数(scanf, printf)，总比iostream的输入输出函数快</p>\n<h2 id=\"1-输出实验\"><a href=\"#1-输出实验\" class=\"headerlink\" title=\"1.输出实验\"></a>1.输出实验</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * 传统标准&amp;文件输出：printf&amp;fprintf</span><br><span class=\"line\"> * C++标准&amp;文件输出：ostream&amp;ofstream</span><br><span class=\"line\">*/</span><br><span class=\"line\"></span><br><span class=\"line\">#include &lt;iostream&gt;</span><br><span class=\"line\">#include &lt;fstream&gt;</span><br><span class=\"line\">#include &lt;cstdio&gt;</span><br><span class=\"line\">#include &lt;cstdlib&gt;</span><br><span class=\"line\">#include &lt;ctime&gt;</span><br><span class=\"line\">#include &quot;files.hpp&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">clock_t cTest(FILE * out);</span><br><span class=\"line\">clock_t cppTest(std::ostream &amp; out);</span><br><span class=\"line\"></span><br><span class=\"line\">int main(void)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    // C风格标准&amp;文件输出</span><br><span class=\"line\">    FILE * cStandard = stdout;</span><br><span class=\"line\">    FILE * cFile = fopen(OFILE, &quot;w&quot;);</span><br><span class=\"line\">    // CPP风格标准&amp;文件输出</span><br><span class=\"line\">    std::ostream &amp; cppStandard = std::cout;</span><br><span class=\"line\">    std::ofstream cppFile;</span><br><span class=\"line\">    cppFile.open(OFILE);</span><br><span class=\"line\">    clock_t tcS, tcF, tcppS, tcppF;</span><br><span class=\"line\"></span><br><span class=\"line\">    // 是否打开成功判断</span><br><span class=\"line\">    if (cFile == NULL || !cppFile.is_open())</span><br><span class=\"line\">        exit(EXIT_FAILURE);</span><br><span class=\"line\"></span><br><span class=\"line\">    tcS = cTest(cStandard); // C标准输出用掉的时间</span><br><span class=\"line\">    tcF = cTest(cFile); // C文件输出</span><br><span class=\"line\">    tcppS = cppTest(cppStandard); // CPP标准输出</span><br><span class=\"line\">    tcppF = cppTest(cppFile); // CPP文件输出</span><br><span class=\"line\"></span><br><span class=\"line\">    std::cout &lt;&lt; &quot;---&quot; &lt;&lt; std::endl;</span><br><span class=\"line\">    std::cout &lt;&lt; &quot;c standard: &quot; &lt;&lt; double(tcS) / CLOCKS_PER_SEC &lt;&lt; &quot; seconds&quot; &lt;&lt; std::endl;</span><br><span class=\"line\">    std::cout &lt;&lt; &quot;c file: &quot; &lt;&lt; double(tcF) / CLOCKS_PER_SEC &lt;&lt; &quot; seconds&quot; &lt;&lt; std::endl;</span><br><span class=\"line\">    std::cout &lt;&lt; &quot;cpp standard: &quot; &lt;&lt; double(tcppS) / CLOCKS_PER_SEC &lt;&lt; &quot; seconds&quot; &lt;&lt; std::endl;</span><br><span class=\"line\">    std::cout &lt;&lt; &quot;cpp file: &quot; &lt;&lt; double(tcppF) / CLOCKS_PER_SEC &lt;&lt; &quot; seconds&quot; &lt;&lt; std::endl;</span><br><span class=\"line\">    </span><br><span class=\"line\">    fclose(cFile);</span><br><span class=\"line\">    cppFile.close();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">clock_t cTest(FILE * out)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    clock_t start, end;</span><br><span class=\"line\"></span><br><span class=\"line\">    start = clock();</span><br><span class=\"line\">    for (int i = 0; i &lt; ITERATE; i++)</span><br><span class=\"line\">        fprintf(out, &quot;%s\\n&quot;, QUOTE);</span><br><span class=\"line\">    end = clock();</span><br><span class=\"line\"></span><br><span class=\"line\">    return end - start;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">clock_t cppTest(std::ostream &amp; out)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    clock_t start, end;</span><br><span class=\"line\"></span><br><span class=\"line\">    start = clock();</span><br><span class=\"line\">    for (int i = 0; i &lt; ITERATE; i++)</span><br><span class=\"line\">        out &lt;&lt; QUOTE &lt;&lt; std::endl;</span><br><span class=\"line\">    end = clock();</span><br><span class=\"line\"></span><br><span class=\"line\">    return end - start;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>最后输出：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">c standard: 27.648 seconds</span><br><span class=\"line\">c file: 0.029 seconds</span><br><span class=\"line\">cpp standard: 3.726 seconds</span><br><span class=\"line\">cpp file: 0.154 seconds</span><br></pre></td></tr></table></figure>\n\n<p>结论：</p>\n<ol>\n<li>对于标准输出与文件输出，文件输出 远优于 标准输出</li>\n<li>对于c文件输出与cpp文件输出，c文件输出 优于 cpp文件输出</li>\n<li>对于c标准输出与cpp标准输出，cpp标准输出 远优于 c标准输出</li>\n</ol>\n<p>但做到这里我意识到，大数据一般不会写入标准输出里<br>因此比较的对象应该是重定向输出与文件输出<br>又进行了一次实验，这次的结果将重定向到CONTAINER.dat里<br>结果</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">c standard: 0.046 seconds</span><br><span class=\"line\">c file: 0.033 seconds</span><br><span class=\"line\">cpp standard: 0.181 seconds</span><br><span class=\"line\">cpp file: 0.151 seconds</span><br></pre></td></tr></table></figure>\n\n<p>于是最后得出结论</p>\n<ol>\n<li>对于重定向输出与文件输出，文件输出 远优于 重定向输出</li>\n<li>对于文件输出，c文件输出 优于 cpp文件输出</li>\n<li>对于重定向输出，c重定向输出 优于 cpp重定向输出</li>\n</ol>\n<h2 id=\"2-输入实验\"><a href=\"#2-输入实验\" class=\"headerlink\" title=\"2.输入实验\"></a>2.输入实验</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * 传统标准&amp;文件输入：scanf&amp;fscanff</span><br><span class=\"line\"> * C++标准&amp;文件输出：istream&amp;ifstream</span><br><span class=\"line\">*/</span><br><span class=\"line\"></span><br><span class=\"line\">#include &lt;iostream&gt;</span><br><span class=\"line\">#include &lt;fstream&gt;</span><br><span class=\"line\">#include &lt;cstdio&gt;</span><br><span class=\"line\">#include &lt;cstdlib&gt;</span><br><span class=\"line\">#include &lt;ctime&gt;</span><br><span class=\"line\">#include &quot;files.hpp&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">clock_t cTest(FILE * in);</span><br><span class=\"line\">clock_t cppTest(std::istream &amp; in);</span><br><span class=\"line\"></span><br><span class=\"line\">int main(void)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    // c标准&amp;文件输入</span><br><span class=\"line\">    FILE * ciFile = fopen(IFILE, &quot;r&quot;);</span><br><span class=\"line\">    FILE * ciStandard = stdin;</span><br><span class=\"line\">    // cpp标准&amp;文件输入</span><br><span class=\"line\">    std::ifstream cppiFile;</span><br><span class=\"line\">    cppiFile.open(IFILE);</span><br><span class=\"line\">    std::istream &amp; cppiStandard = std::cin;</span><br><span class=\"line\">    clock_t tcF, tcS, tcppF, tcppS;</span><br><span class=\"line\"></span><br><span class=\"line\">    if (ciFile == NULL || !cppiFile.is_open())</span><br><span class=\"line\">        exit(EXIT_FAILURE);</span><br><span class=\"line\">    </span><br><span class=\"line\">    tcF = cTest(ciFile);</span><br><span class=\"line\">    tcS = cTest(ciStandard);</span><br><span class=\"line\">    tcppF = cppTest(cppiFile);</span><br><span class=\"line\">    tcppS = cppTest(cppiStandard);</span><br><span class=\"line\"></span><br><span class=\"line\">    std::cout &lt;&lt; &quot;---&quot; &lt;&lt; std::endl;</span><br><span class=\"line\">    std::cout &lt;&lt; &quot;c standard: &quot; &lt;&lt; double(tcS) / CLOCKS_PER_SEC &lt;&lt; &quot; seconds&quot; &lt;&lt; std::endl;</span><br><span class=\"line\">    std::cout &lt;&lt; &quot;c file: &quot; &lt;&lt; double(tcF) / CLOCKS_PER_SEC &lt;&lt; &quot; seconds&quot; &lt;&lt; std::endl;</span><br><span class=\"line\">    std::cout &lt;&lt; &quot;cpp standard: &quot; &lt;&lt; double(tcppS) / CLOCKS_PER_SEC &lt;&lt; &quot; seconds&quot; &lt;&lt; std::endl;</span><br><span class=\"line\">    std::cout &lt;&lt; &quot;cpp file: &quot; &lt;&lt; double(tcppF) / CLOCKS_PER_SEC &lt;&lt; &quot; seconds&quot; &lt;&lt; std::endl;</span><br><span class=\"line\"></span><br><span class=\"line\">    fclose(ciFile);</span><br><span class=\"line\">    cppiFile.close();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">clock_t cTest(FILE * in)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    clock_t start, end;</span><br><span class=\"line\">    char buff[1024];</span><br><span class=\"line\">    </span><br><span class=\"line\">    start = clock();</span><br><span class=\"line\">    for (int i = 0; i &lt; ITERATE; i++)</span><br><span class=\"line\">        fscanf(in, &quot;%s&quot;, buff);</span><br><span class=\"line\">    end = clock();</span><br><span class=\"line\"></span><br><span class=\"line\">    return end - start;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">clock_t cppTest(std::istream &amp; in)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    clock_t start, end;</span><br><span class=\"line\">    char buff[1024];</span><br><span class=\"line\"></span><br><span class=\"line\">    start = clock();</span><br><span class=\"line\">    for (int i = 0; i &lt; ITERATE; i++)</span><br><span class=\"line\">        std::cin &gt;&gt; buff;</span><br><span class=\"line\">    end = clock();</span><br><span class=\"line\"></span><br><span class=\"line\">    return end - start;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>输出结果:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">c standard: 0.02 seconds</span><br><span class=\"line\">c file: 0.026 seconds</span><br><span class=\"line\">cpp standard: 0.039 seconds</span><br><span class=\"line\">cpp file: 0.043 seconds</span><br></pre></td></tr></table></figure>\n\n<p>结论：</p>\n<ol>\n<li>对于重定向输入与文件输入，文件输入 约等于 重定向输入</li>\n<li>对于文件输入，c文件输入 优于 cpp文件输入</li>\n<li>对于重定向输入，c重定向输入 优于 cpp重定向输入</li>\n</ol>\n<h2 id=\"3-结论\"><a href=\"#3-结论\" class=\"headerlink\" title=\"3.结论\"></a>3.结论</h2><p>c的输入输出效率确实比cpp的快一些<br>同时，使用文件输入输出的效率是所有情况最快的</p>\n<p>这个结论有什么用呢？我们针对算法竞赛来分析</p>\n<p>算法竞赛的数据输入输出分为两种类型：</p>\n<ul>\n<li>核心代码模式<ul>\n<li>线上算法平台（如leetcode）评判的模式</li>\n<li>特点：不需要些输入输出的部分，只需要实现核心代码</li>\n</ul>\n</li>\n<li>ACM模式<ul>\n<li>目前主流的模式</li>\n<li>特点：需要考虑数据的输入与输出，评判标准是输出是否一致<br>所以我们针对对ACM模式进行讨论<br>ACM模式流程：<br>给定输入文件-&gt;输入到程序-&gt;得到输出文件-&gt;对比标准答案<br>显然这是一个重定向的过程<br>于是，对于竞赛来说，确实是使用c的输入输出模式，会节省一些时间</li>\n</ul>\n</li>\n</ul>\n","text":"0.前言看大佬题解时总是会提到关于输入输出的问题，那就是：cstdio的输入输出函数(scanf, printf)，总比iostream的输入输出函数快 1.输...","permalink":"/post/探寻C-输入输出的最佳方案","photos":[],"count_time":{"symbolsCount":"5k","symbolsTime":"5 mins."},"categories":[],"tags":[{"name":"C++","slug":"C","count":3,"path":"api/tags/C.json"},{"name":"io","slug":"io","count":1,"path":"api/tags/io.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#0-%E5%89%8D%E8%A8%80\"><span class=\"toc-text\">0.前言</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-%E8%BE%93%E5%87%BA%E5%AE%9E%E9%AA%8C\"><span class=\"toc-text\">1.输出实验</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-%E8%BE%93%E5%85%A5%E5%AE%9E%E9%AA%8C\"><span class=\"toc-text\">2.输入实验</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3-%E7%BB%93%E8%AE%BA\"><span class=\"toc-text\">3.结论</span></a></li></ol>","author":{"name":"猫冰","slug":"blog-author","avatar":"/images/MB-drinking.png","link":"/","description":"小猫用来存博客的地方（也会发一点有趣的东西）","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":"https://github.com/C0P1Fur","twitter":"https://x.com/_Caticee","customs":{"bilibili":{"icon":"/images/bilibili.svg","link":"https://space.bilibili.com/2140016240"}}}}},"mapped":true,"hidden":false,"prev_post":{"title":"个人博客建站教程","uid":"79fe4e631ac71a379c3a62ac37d71308","slug":"个人博客建站教程","date":"2025-10-16T14:46:06.000Z","updated":"2025-10-22T12:39:04.012Z","comments":true,"path":"api/articles/个人博客建站教程.json","keywords":"Catice, 猫冰","cover":null,"text":" 这是一个建站基础教程，主要是为了熟悉流程，更多需要技术个性化的东西之后再详细学习 索引 准备工作 安装nodejs hexo生成框架 部署上线 修改域名 问题...","permalink":"/post/个人博客建站教程","photos":[],"count_time":{"symbolsCount":"4.6k","symbolsTime":"4 mins."},"categories":[{"name":"web","slug":"web","count":1,"path":"api/categories/web.json"}],"tags":[{"name":"tutorial","slug":"tutorial","count":2,"path":"api/tags/tutorial.json"}],"author":{"name":"猫冰","slug":"blog-author","avatar":"/images/MB-drinking.png","link":"/","description":"小猫用来存博客的地方（也会发一点有趣的东西）","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":"https://github.com/C0P1Fur","twitter":"https://x.com/_Caticee","customs":{"bilibili":{"icon":"/images/bilibili.svg","link":"https://space.bilibili.com/2140016240"}}}}},"feature":true},"next_post":{"title":"P1059","uid":"aaa8957324fc6270d3aee88df4360ef5","slug":"P1059","date":"2025-10-28T11:58:09.000Z","updated":"2025-10-28T12:17:50.697Z","comments":true,"path":"api/articles/P1059.json","keywords":"Catice, 猫冰","cover":null,"text":"题目描述明明想在学校中请一些同学一起做一项问卷调查，为了实验的客观性，他先用计算机生成了 N 个 1 到 1000 之间的随机整数 (N≤100)，对于其中重复...","permalink":"/post/P1059","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"algorithm","slug":"algorithm","count":2,"path":"api/categories/algorithm.json"},{"name":"sort","slug":"algorithm/sort","count":1,"path":"api/categories/algorithm/sort.json"}],"tags":[{"name":"notes","slug":"notes","count":1,"path":"api/tags/notes.json"}],"author":{"name":"猫冰","slug":"blog-author","avatar":"/images/MB-drinking.png","link":"/","description":"小猫用来存博客的地方（也会发一点有趣的东西）","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":"https://github.com/C0P1Fur","twitter":"https://x.com/_Caticee","customs":{"bilibili":{"icon":"/images/bilibili.svg","link":"https://space.bilibili.com/2140016240"}}}}}}}