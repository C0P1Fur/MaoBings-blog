---
title: 个人博客建站教程
date: 2025-10-16 22:46:06
tags:
 - tutorial
catagories:
 - web
---
> 这是一个建站基础教程，主要是为了熟悉流程，
> 更多需要技术个性化的东西之后再详细学习

## 索引
- [准备工作](#section0)
- [安装nodejs](#section1)
- [hexo生成框架](#section2)
- [部署上线](#section3)
- [修改域名](#section4)
- [问题指南](#questions)
- [补充知识点](#tips)

## 0.建站之前需要准备的（windows环境下）<a id="section0"></a>
- windows下的linux环境（方便网站管理）-> [wsl教程](https://www.bilibili.com/video/BV1tW42197za)
- 网站数据托管github（方便存储网站内容）
- 博客框架hexo（方便网站内容管理）
- 网站部署netlify（可以直接通过github库部署）
- 在阿里云购买的域名

## 1.linux下配置必要的工具 <a id="section1"></a>
使用wsl在windows下建立一个linux环境，我这里选择的是ubuntu版本

接下来，下载nodejs，它自带npm包管理软件
`sudo apt install nodejs`

安装完成后检查安装情况
`node -v`
`npm -v`
出现版本提示就算安装成功

同时记得修改以下npm的安装源，因为默认源在国内很慢
```
npm config set registry https://registry.npm.taobao.org #设置为淘宝源
npm config get registry #查看更新完成后的源
```

---
补充#1：什么是nodejs?
**nodejs（我自己的理解，可能不准确）**
- 是一个基于chrome V8引擎开发的C++程序
- 可以简单的理解为Javascript的运行环境，是一个编译器
- nodejs让Javascript能在前后端都运行
**npm**
- 是基于nodejs衍生出来的
- 一个Js包管理工具，相当于是下载JS包的app store

## 2.使用hexo生成博客框架 <a id="section2"></a>
使用npm安装hexo框架
`npm install hexo-cli -g # 全局安装hexo命令行工具`

安装好后，切换到对应的文件夹，使用
`hexo init "项目名"`
生成一个新的hexo框架

框架生成完成后，要格外关注项目里面的这几个文件(夹)
- ***_config.yml（重点关注）***
    - 为全局配置文件，网站的很多信息都在这里配置，比如说网站名称，副标题，描述，作者，语言，主题等等。具体可以参考官方文档：https://hexo.io/zh-cn/docs/configuration.html。
- scaffolds
    - 骨架文件，是生成新页面或者新博客的模版。可以根据需求编辑，当hexo生成新博客的时候，会用这里面的模版进行初始化。
- source
    - 这个文件夹下面存放的是网站的资源，包括
    - _posts：存放网站的帖子，也就是.md文件
    - _drafts：存放网站的草稿
- themes
    - 网站主题目录，hexo有非常丰富的主题支持，主题目录会存放在这个目录下面。
    - 我们后续会以默认主题来演示，更多的主题参见：https://hexo.io/themes/

`hexo new post "MyBlog.md"`
`hexo generate`
`hexo server`
三条指令合在一起的意思是，新建MyBlog.md这个帖子，生成静态文件，最后在本地运行服务器
1. 发布以及编辑博客的教程在官网有[详细的说明](https://hexo.io/zh-cn/docs/writing)
2. 生成静态文件，可以理解为C编译器将C语言编译为机器语言的过程，hexo将内容编译成浏览器看得懂的HTML CSS JS文件
3. 在本地运行服务器，可以用作本地调试用，编辑完后看看网站的效果

## 3.使用netlify将网站部署上线<a id="section3"></a>
将代码上传到github上，netlify可以直接导入
只给出操作，命令说明见：[git教程](./git分支教程)
```
git remote add origin "git仓库链接"
git branch -M main

git add .
git commit -m "生成了我的第一个博客"
git push -u origin main
#输入用户名和密码
```

将代码推送到github后，就可以使用netlify部署了
登录netlify后，从github导入项目，再配置网站

此时，网站已经部署上线，可以通过netlify中给出的网址访问

## 4.给网站分配域名<a id="section4"></a>
1. 在域名管理网站购买域名，这里拿阿里云举例
2. 在netlify的管理域名处添加域名
3. 在阿里云将域名的DNS服务器指向改为netlify的
4. 域名分配成功

具体解释见后文的域名工作原理

## 999.问题指南<a id="questions"></a>
#### 1.使用hexo server时，nodejs与hexo的版本不适配问题
当时使用hexo server时，报错
```
Error [ERR_REQUIRE_ESM]: require() of ES Module /home/catice/tw/node_modules/strip-ansi/index.js from /home/catice/tw/node_modules/hexo/dist/plugins/console/list/common.js not supported.
Instead change the require of index.js in /home/catice/tw/node_modules/hexo/dist/plugins/console/list/common.js to a dynamic import() which is available in all CommonJS modules.
```
同时使用npm install安装兼容时，提示
```
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'hexo@8.0.0',
npm WARN EBADENGINE   required: { node: '>=20.19.0' },
npm WARN EBADENGINE   current: { node: 'v18.19.1', npm: '9.2.0' }
npm WARN EBADENGINE }
```

问题分析
看到第二个提示再结合第一个，很明显是版本不兼容的问题，nodejs版本太低
此时我尝试更新nodejs，使用`apt upgrade nodejs`，但发现已经是最新版本
我又尝试给apt在`/etc/apt/sources.list`里换源，使用`apt upgrade`刷新
但发现还是最新版，最后不得不安装低版本的hexo来兼容
```
# 卸载当前 hexo
npm uninstall hexo

# 清除 npm 缓存
npm cache clean --force

# 安装兼容的 Hexo 版本
npm install hexo@7.2.0 --save
```

#### 2.github登录不上
github从2021年8月13日，开始要求使用 token 进行命令行 Git 操作

需要在
```github->我的头像->settings->developer settings->personal access token->tokens(classic)->generate new token(classic)```
使用生成的token登录

#### 3.apt下载慢
使用`cat /etc/apt/sources.list`查看下载源
若使用的是apt官方的下载源，则需换源，因为慢

在`/etc/apt/sources.list`设置源
```
deb https://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiverse
deb https://mirrors.aliyun.com/ubuntu/ jammy-security main restricted universe multiverse
deb https://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiverse
deb https://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiverse
```
使用apt update从源下载包列表，换源成功

#### 4.cloudflare配置域名成功，但访问会弹出netlify网站不存在的提示
核心原因：Netlify 需要知道你的自定义域名
Netlify 有一个安全机制：它只为自己认识的域名提供服务。否则，任何人都可以随便指向它的服务器，会造成安全和管理问题。
当你通过 maobing.top 访问时，请求的流程是这样的：
1. DNS 解析成功：maobing.top -> maobingbing.netlify.app 的 IP。
2. 请求到达 Netlify 的服务器。
3. Netlify 服务器检查请求头中的 Host 字段，发现是 maobing.top。
4. Netlify 在自己的数据库里查找：“我的所有站点里，有谁设置了 maobing.top 这个域名吗？”
5. 如果没找到，它就会抛出这个 “Netlify网站不存在” 的错误。

解决方法就是在netlify里添加maobing.top域名

## 1000.补充知识点<a id="tips"></a>

#### 域名工作原理
建网站的域名管理流程如下
1. 你想去一个地方（输入域名）
2. 让你的智能助手（递归解析器）去查
    - 递归DNS解析器是：网络服务提供商（如电信、联通）或公共DNS服务商（如阿里云的223.5.5.5、谷歌的8.8.8.8）
3. 助手先问全球总机（根服务器）
    - 根服务器：是公共的，知道管理.com，.net的顶级域服务器的地址
4. 总机让它去问市规划局（顶级域服务器）
    - 顶级域服务器：知道权威域名服务器的地址
5. 市规划局让它去问片区物业总公司（权威域名服务器）
    - 权威域名服务器：如阿里云、netlify、cloudflare
6. 物业总公司给出了精确的门牌号（IP地址）
7. 助手带你精准抵达（访问网站）

更改DNS解析的流程如下
1. 你提出更改物业（权威域名服务器）的请求
2. 让原物业找到房产管理总局（顶级域服务器）
    - 只能先找（权威域名服务器）更改
    - 不能直接在（顶级域服务器）更改
3. 在房产管理总局更改房子的物业（另外一个权威域名服务器）
netlify在管理域名时，要求在域名购买商那里更改DNS服务器，这就是原因

常见的DNS记录类型
- A指向一个IPV4地址
- AAAA指向一个IPV6地址
- CNAME由一个域名指向另一个域名
- NS(Name Server)就是权威域名服务器

CDN的工作原理如下（重写）
1. 经过前面的一系列操作，你找到了物业（权威域名服务器）
2. 物业告诉你，要看房型信息，得去问存有房型信息的地方（CDN服务器）
3. 房型信息给出最近的能看房的地方（CMAKE）